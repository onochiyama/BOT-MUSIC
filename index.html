<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üéµ Music Bot Dashboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-primary: #0f0f23;
        --bg-secondary: #1a1a2e;
        --bg-card: #16213e;
        --accent: #e94560;
        --accent-hover: #ff6b6b;
        --text-primary: #ffffff;
        --text-secondary: #a0a0a0;
        --success: #00d26a;
        --warning: #ffc107;
        --border: #2a2a4a;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        background-image:
          radial-gradient(ellipse at top, #1a1a3e 0%, transparent 50%),
          radial-gradient(ellipse at bottom, #0f0f23 0%, #0a0a15 100%);
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Header */
      .header {
        text-align: center;
        padding: 40px 20px;
        background: linear-gradient(
          135deg,
          var(--bg-secondary) 0%,
          var(--bg-card) 100%
        );
        border-radius: 20px;
        margin-bottom: 30px;
        border: 1px solid var(--border);
        box-shadow: 0 10px 40px rgba(233, 69, 96, 0.1);
      }

      .header h1 {
        font-size: 2.5rem;
        background: linear-gradient(90deg, #e94560, #ff6b6b, #ffc107);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 10px;
      }

      .header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
      }

      .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: rgba(0, 210, 106, 0.1);
        border: 1px solid var(--success);
        border-radius: 20px;
        margin-top: 15px;
        font-size: 0.9rem;
      }

      .status-dot {
        width: 10px;
        height: 10px;
        background: var(--success);
        border-radius: 50%;
        animation: pulse 2s infinite;
      }

      .status-badge.offline {
        background: rgba(255, 107, 107, 0.1);
        border-color: var(--accent);
      }

      .status-badge.offline .status-dot {
        background: var(--accent);
        animation: none;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* Grid Layout */
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
      }

      /* Cards */
      .card {
        background: linear-gradient(
          145deg,
          var(--bg-card) 0%,
          var(--bg-secondary) 100%
        );
        border-radius: 16px;
        padding: 25px;
        border: 1px solid var(--border);
        transition:
          transform 0.3s,
          box-shadow 0.3s;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(233, 69, 96, 0.15);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
      }

      .card-icon {
        font-size: 1.5rem;
      }

      .card-title {
        font-size: 1.2rem;
        font-weight: 600;
      }

      /* Now Playing */
      .now-playing {
        grid-column: span 2;
      }

      @media (max-width: 768px) {
        .now-playing {
          grid-column: span 1;
        }
      }

      .song-info {
        display: flex;
        gap: 20px;
        align-items: center;
        background: rgba(0, 0, 0, 0.3);
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
      }

      .song-thumbnail {
        width: 120px;
        height: 90px;
        border-radius: 10px;
        object-fit: cover;
        background: var(--bg-primary);
      }

      .song-details h3 {
        font-size: 1.1rem;
        margin-bottom: 8px;
        line-height: 1.4;
      }

      .song-duration {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      /* Controls */
      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 12px 24px;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;
        font-family: inherit;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--accent) 0%, #ff6b6b 100%);
        color: white;
      }

      .btn-primary:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 20px rgba(233, 69, 96, 0.4);
      }

      .btn-secondary {
        background: var(--bg-primary);
        color: var(--text-primary);
        border: 1px solid var(--border);
      }

      .btn-secondary:hover {
        background: var(--border);
      }

      .btn-success {
        background: linear-gradient(135deg, #00d26a 0%, #00a854 100%);
        color: white;
      }

      .btn-warning {
        background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
        color: #000;
      }

      .btn-danger {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        color: white;
      }

      .btn-icon {
        width: 50px;
        height: 50px;
        padding: 0;
        border-radius: 50%;
        font-size: 1.3rem;
      }

      .btn-large {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
      }

      /* Search */
      .search-container {
        display: flex;
        gap: 12px;
        margin-bottom: 15px;
      }

      .search-input {
        flex: 1;
        padding: 14px 18px;
        border: 2px solid var(--border);
        border-radius: 12px;
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: 1rem;
        font-family: inherit;
        transition: border-color 0.3s;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--accent);
      }

      .search-input::placeholder {
        color: var(--text-secondary);
      }

      /* Queue */
      .queue-list {
        max-height: 300px;
        overflow-y: auto;
      }

      .queue-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        margin-bottom: 8px;
        transition: background 0.3s;
      }

      .queue-item:hover {
        background: rgba(233, 69, 96, 0.1);
      }

      .queue-number {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--accent);
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.9rem;
      }

      .queue-title {
        flex: 1;
        font-size: 0.95rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .queue-remove {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 5px;
        font-size: 1.2rem;
        transition: color 0.3s;
      }

      .queue-remove:hover {
        color: var(--accent);
      }

      .queue-empty {
        text-align: center;
        padding: 30px;
        color: var(--text-secondary);
      }

      /* Volume */
      .volume-container {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .volume-slider {
        flex: 1;
        height: 8px;
        -webkit-appearance: none;
        background: var(--bg-primary);
        border-radius: 10px;
        outline: none;
      }

      .volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: var(--accent);
        border-radius: 50%;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .volume-slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
      }

      .volume-value {
        min-width: 50px;
        text-align: center;
        font-weight: 600;
      }

      /* Settings */
      .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid var(--border);
      }

      .setting-item:last-child {
        border-bottom: none;
      }

      .setting-label {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .toggle {
        position: relative;
        width: 50px;
        height: 26px;
      }

      .toggle input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--border);
        border-radius: 26px;
        transition: 0.3s;
      }

      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 3px;
        bottom: 3px;
        background: white;
        border-radius: 50%;
        transition: 0.3s;
      }

      .toggle input:checked + .toggle-slider {
        background: var(--accent);
      }

      .toggle input:checked + .toggle-slider:before {
        transform: translateX(24px);
      }

      /* API Config */
      .config-section {
        background: rgba(255, 193, 7, 0.1);
        border: 1px solid var(--warning);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .config-section h4 {
        color: var(--warning);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Toast */
      .toast-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }

      .toast {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 15px 20px;
        margin-top: 10px;
        animation: slideIn 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }

      .toast.success {
        border-color: var(--success);
      }

      .toast.error {
        border-color: var(--accent);
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* Footer */
      .footer {
        text-align: center;
        padding: 20px;
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .footer a {
        color: var(--accent);
        text-decoration: none;
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: var(--bg-primary);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--accent);
      }

      /* Responsive */
      @media (max-width: 480px) {
        .header h1 {
          font-size: 1.8rem;
        }

        .controls {
          gap: 10px;
        }

        .btn-icon {
          width: 45px;
          height: 45px;
        }

        .song-info {
          flex-direction: column;
          text-align: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <h1>üéµ Music Bot Dashboard</h1>
        <p>‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ö‡∏≠‡∏ó‡πÄ‡∏û‡∏•‡∏á Discord ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà</p>
        <div class="status-badge" id="statusBadge">
          <span class="status-dot"></span>
          <span id="statusText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...</span>
        </div>
      </header>

      <!-- API Config -->
      <div class="config-section" id="configSection">
        <h4>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API</h4>
        <div class="search-container">
          <input
            type="text"
            id="apiUrl"
            class="search-input"
            placeholder="URL ‡∏Ç‡∏≠‡∏á Bot API (‡πÄ‡∏ä‡πà‡∏ô http://your-vps-ip:5000)"
          />
          <button class="btn btn-primary" onclick="saveApiConfig()">
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
          </button>
        </div>
        <p
          style="
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-top: 10px;
          "
        >
          üí° ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á VPS ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏ö‡∏≠‡∏ó‡∏≠‡∏¢‡∏π‡πà ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏û‡∏≠‡∏£‡πå‡∏ï 5000
        </p>
      </div>

      <!-- Main Grid -->
      <div class="grid">
        <!-- Now Playing -->
        <div class="card now-playing">
          <div class="card-header">
            <span class="card-icon">üéµ</span>
            <span class="card-title">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô</span>
          </div>
          <div class="song-info">
            <img
              src="https://via.placeholder.com/120x90/1a1a2e/e94560?text=No+Song"
              alt="Thumbnail"
              class="song-thumbnail"
              id="songThumbnail"
            />
            <div class="song-details">
              <h3 id="songTitle">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏•‡πà‡∏ô</h3>
              <p class="song-duration" id="songDuration">--:--</p>
            </div>
          </div>
          <div class="controls">
            <button
              class="btn btn-icon btn-secondary"
              onclick="sendCommand('pause')"
              title="‡∏´‡∏¢‡∏∏‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß"
            >
              ‚è∏Ô∏è
            </button>
            <button
              class="btn btn-icon btn-large btn-primary"
              onclick="sendCommand('resume')"
              title="‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠"
            >
              ‚ñ∂Ô∏è
            </button>
            <button
              class="btn btn-icon btn-secondary"
              onclick="sendCommand('skip')"
              title="‡∏Ç‡πâ‡∏≤‡∏°"
            >
              ‚è≠Ô∏è
            </button>
            <button
              class="btn btn-icon btn-danger"
              onclick="sendCommand('stop')"
              title="‡∏´‡∏¢‡∏∏‡∏î"
            >
              ‚èπÔ∏è
            </button>
          </div>
        </div>

        <!-- Add Song -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">‚ûï</span>
            <span class="card-title">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á</span>
          </div>
          <div class="search-container">
            <input
              type="text"
              id="songSearch"
              class="search-input"
              placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á ‡∏´‡∏£‡∏∑‡∏≠ YouTube URL"
            />
          </div>
          <button
            class="btn btn-success"
            onclick="addSong()"
            style="width: 100%"
          >
            üéµ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á
          </button>
        </div>

        <!-- Volume Control -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">üîä</span>
            <span class="card-title">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á</span>
          </div>
          <div class="volume-container">
            <span>üîà</span>
            <input
              type="range"
              min="0"
              max="100"
              value="50"
              class="volume-slider"
              id="volumeSlider"
              onchange="setVolume(this.value)"
            />
            <span class="volume-value" id="volumeValue">50%</span>
            <span>üîä</span>
          </div>
        </div>

        <!-- Queue -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">üìú</span>
            <span class="card-title">‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏û‡∏•‡∏á</span>
            <button
              class="btn btn-secondary"
              onclick="clearQueue()"
              style="margin-left: auto; padding: 8px 12px; font-size: 0.85rem"
            >
              üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß
            </button>
          </div>
          <div class="queue-list" id="queueList">
            <div class="queue-empty">
              <p>üì≠ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß</p>
            </div>
          </div>
        </div>

        <!-- Settings -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">‚öôÔ∏è</span>
            <span class="card-title">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
          </div>
          <div class="setting-item">
            <div class="setting-label">
              <span>üåô</span>
              <span>‡πÇ‡∏´‡∏°‡∏î 24/7</span>
            </div>
            <label class="toggle">
              <input
                type="checkbox"
                id="toggle247"
                onchange="toggle247Mode(this.checked)"
              />
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-label">
              <span>üö™</span>
              <span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á</span>
            </div>
            <button
              class="btn btn-danger"
              onclick="sendCommand('leave')"
              style="padding: 8px 16px"
            >
              ‡∏≠‡∏≠‡∏Å
            </button>
          </div>
        </div>

        <!-- Server Info -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">üìä</span>
            <span class="card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå</span>
          </div>
          <div class="setting-item">
            <span>üè† ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå</span>
            <span id="serverName">-</span>
          </div>
          <div class="setting-item">
            <span>üîä ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á</span>
            <span id="voiceChannel">-</span>
          </div>
          <div class="setting-item">
            <span>üë• ‡∏ú‡∏π‡πâ‡∏ü‡∏±‡∏á</span>
            <span id="listeners">-</span>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer class="footer">
        <p>Made with ‚ù§Ô∏è | Music Bot Dashboard</p>
      </footer>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
      // Configuration
      let API_URL = localStorage.getItem("apiUrl") || "";

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
        const savedUrl = localStorage.getItem("apiUrl");
        if (savedUrl) {
          document.getElementById("apiUrl").value = savedUrl;
          API_URL = savedUrl;
          document.getElementById("configSection").style.display = "none";
          connectToBot();
        }

        // Enter key to add song
        document
          .getElementById("songSearch")
          .addEventListener("keypress", (e) => {
            if (e.key === "Enter") addSong();
          });

        // Volume slider
        document
          .getElementById("volumeSlider")
          .addEventListener("input", (e) => {
            document.getElementById("volumeValue").textContent =
              e.target.value + "%";
          });
      });

      // Save API Config
      function saveApiConfig() {
        const url = document.getElementById("apiUrl").value.trim();
        if (!url) {
          showToast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á API", "error");
          return;
        }

        API_URL = url.replace(/\/$/, ""); // Remove trailing slash
        localStorage.setItem("apiUrl", API_URL);
        document.getElementById("configSection").style.display = "none";
        showToast("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API URL ‡πÅ‡∏•‡πâ‡∏ß", "success");
        connectToBot();
      }

      // Connect to Bot
      async function connectToBot() {
        try {
          const response = await fetch(`${API_URL}/api/status`);
          const data = await response.json();

          updateStatus(true);
          updateNowPlaying(data);
          updateQueue(data.queue || []);
          updateServerInfo(data);

          // Update 24/7 toggle
          document.getElementById("toggle247").checked = data.is_247 || false;

          // Poll for updates
          setInterval(fetchStatus, 5000);
        } catch (error) {
          updateStatus(false);
          console.error("Connection error:", error);
        }
      }

      // Fetch Status
      async function fetchStatus() {
        try {
          const response = await fetch(`${API_URL}/api/status`);
          const data = await response.json();

          updateStatus(true);
          updateNowPlaying(data);
          updateQueue(data.queue || []);
          updateServerInfo(data);
          document.getElementById("toggle247").checked = data.is_247 || false;
          document.getElementById("volumeSlider").value = data.volume || 50;
          document.getElementById("volumeValue").textContent =
            (data.volume || 50) + "%";
        } catch (error) {
          updateStatus(false);
        }
      }

      // Update Status Badge
      function updateStatus(online) {
        const badge = document.getElementById("statusBadge");
        const text = document.getElementById("statusText");

        if (online) {
          badge.classList.remove("offline");
          text.textContent = "‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå";
        } else {
          badge.classList.add("offline");
          text.textContent = "‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå";
        }
      }

      // Update Now Playing
      function updateNowPlaying(data) {
        document.getElementById("songTitle").textContent =
          data.current_song || "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏•‡πà‡∏ô";
        document.getElementById("songDuration").textContent =
          data.duration || "--:--";

        if (data.thumbnail) {
          document.getElementById("songThumbnail").src = data.thumbnail;
        } else {
          document.getElementById("songThumbnail").src =
            "https://via.placeholder.com/120x90/1a1a2e/e94560?text=No+Song";
        }
      }

      // Update Queue
      function updateQueue(queue) {
        const queueList = document.getElementById("queueList");

        if (!queue || queue.length === 0) {
          queueList.innerHTML =
            '<div class="queue-empty"><p>üì≠ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß</p></div>';
          return;
        }

        queueList.innerHTML = queue
          .map(
            (song, index) => `
                <div class="queue-item">
                    <span class="queue-number">${index + 1}</span>
                    <span class="queue-title">${song.title || song}</span>
                    <button class="queue-remove" onclick="removeSong(${index + 1})">‚úï</button>
                </div>
            `,
          )
          .join("");
      }

      // Update Server Info
      function updateServerInfo(data) {
        document.getElementById("serverName").textContent =
          data.server_name || "-";
        document.getElementById("voiceChannel").textContent =
          data.voice_channel || "-";
        document.getElementById("listeners").textContent =
          data.listeners || "-";
      }

      // Send Command
      async function sendCommand(command) {
        try {
          const response = await fetch(`${API_URL}/api/command`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ command }),
          });

          const data = await response.json();

          if (data.success) {
            showToast(data.message || "‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", "success");
            fetchStatus();
          } else {
            showToast(data.message || "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î", "error");
          }
        } catch (error) {
          showToast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ", "error");
        }
      }

      // Add Song
      async function addSong() {
        const query = document.getElementById("songSearch").value.trim();
        if (!query) {
          showToast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á‡∏´‡∏£‡∏∑‡∏≠ URL", "error");
          return;
        }

        try {
          const response = await fetch(`${API_URL}/api/play`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ query }),
          });

          const data = await response.json();

          if (data.success) {
            showToast(data.message || "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß!", "success");
            document.getElementById("songSearch").value = "";
            fetchStatus();
          } else {
            showToast(data.message || "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î", "error");
          }
        } catch (error) {
          showToast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ", "error");
        }
      }

      // Set Volume
      async function setVolume(value) {
        try {
          await fetch(`${API_URL}/api/volume`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ volume: parseInt(value) }),
          });
        } catch (error) {
          console.error("Volume error:", error);
        }
      }

      // Toggle 24/7 Mode
      async function toggle247Mode(enabled) {
        try {
          const response = await fetch(`${API_URL}/api/247`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ enabled }),
          });

          const data = await response.json();
          showToast(
            data.message || (enabled ? "‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î 24/7" : "‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î 24/7"),
            "success",
          );
        } catch (error) {
          showToast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ", "error");
        }
      }

      // Remove Song
      async function removeSong(position) {
        try {
          const response = await fetch(`${API_URL}/api/remove`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ position }),
          });

          const data = await response.json();
          showToast(data.message || "‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß", "success");
          fetchStatus();
        } catch (error) {
          showToast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ", "error");
        }
      }

      // Clear Queue
      async function clearQueue() {
        try {
          const response = await fetch(`${API_URL}/api/clear`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
          });

          const data = await response.json();
          showToast(data.message || "‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡πÅ‡∏•‡πâ‡∏ß", "success");
          fetchStatus();
        } catch (error) {
          showToast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡πÑ‡∏î‡πâ", "error");
        }
      }

      // Show Toast
      function showToast(message, type = "success") {
        const container = document.getElementById("toastContainer");
        const toast = document.createElement("div");
        toast.className = `toast ${type}`;
        toast.innerHTML = `
                <span>${type === "success" ? "‚úÖ" : "‚ùå"}</span>
                <span>${message}</span>
            `;

        container.appendChild(toast);

        setTimeout(() => {
          toast.style.opacity = "0";
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }
    </script>
  </body>
</html>
